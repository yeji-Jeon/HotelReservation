var $jscomp={scope:{},findInternal:function(a,g,e){a instanceof String&&(a=String(a));for(var h=a.length,f=0;f<h;f++){var n=a[f];if(g.call(e,n,f,a))return{i:f,v:n}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[g]=e.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,g,e,h){if(g){e=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var f=a[h];f in e||(e[f]={});e=e[f]}a=a[a.length-1];h=e[a];g=g(h);g!=h&&null!=g&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base"],a):"object"===typeof module&&module.exports?module.exports=function(g,e){g||(g=window);void 0===e&&(e="undefined"!==typeof window?require("jquery"):require("jquery")(g));require("./grid.base");a(e);return e}:a(jQuery)})(function(a){var g=a.jgrid,e=g.jqID,h=a.fn.jqGrid,f=function(){var d=a.makeArray(arguments);d[0]="subGrid"+d[0].charAt(0).toUpperCase()+d[0].substring(1);d.unshift("");d.unshift("");d.unshift(this.p);
return g.feedback.apply(this,d)},n=function(d,g){return this.each(function(){if(this.grid&&null!=d&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",d,!0);a(c).find(">td."+g).trigger("click")}})};g.extend({setSubGrid:function(){return this.each(function(){var d=this.p,e=a(this),c=d.subGridModel[0],b=function(a){return e.jqGrid("getIconRes",a)};d.subGridOptions=a.extend({commonIconClass:b("subgrid.common"),plusicon:b("subgrid.plus"),minusicon:b("subgrid.minus"),openicon:"rtl"===d.direction?b("subgrid.openRtl"):
b("subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},d.subGridOptions||{});d.colNames.unshift("");d.colModel.unshift({name:"subgrid",width:g.cell_width?d.subGridWidth+d.cellLayout:d.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0});if(c)for(c.align=a.extend([],c.align||[]),d=0;d<c.name.length;d++)c.align[d]=c.align[d]||"left"})},addSubGridCell:function(d,e,c,b){var k=this[0],f=k.p.subGridOptions;
c=a.isFunction(f.hasSubgrid)?f.hasSubgrid.call(k,{rowid:c,iRow:e,iCol:d,data:b}):!0;return null==k.p?"":"<td role='gridcell' class='"+h.getGuiStyles.call(this,"subgrid.tdStart",c?"ui-sgcollapsed sgcollapsed":"")+"' "+k.formatCol(d,e)+">"+(c?"<div class='"+h.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+h.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+g.mergeCssClasses(f.commonIconClass,f.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},
addSubGrid:function(d,n){return this.each(function(){var c=this,b=c.p,k=b.subGridModel[0],q=function(a,b){return h.getGuiStyles.call(c,"subgrid."+a,b||"")},B=q("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+b.direction),A=q("rowSubTable","ui-subtblcell"),C=q("row","ui-subgrid ui-row-"+b.direction),D=q("tdWithIcon","subgrid-cell"),E=q("tdData","subgrid-data"),t=function(b,c,d){d=k.align[d];c=a("<td"+(d?" style='text-align:"+d+";'":"")+"></td>").html(c);b.append(c)},x=function(c,d){var e=b.xmlReader.subgrid;
a(e.root+" "+e.row,c).each(function(){var b,c,g=a("<tr class='"+A+"'></tr>");if(!0===e.repeatitems)a(e.cell,this).each(function(b){t(g,a(this).text()||"&#160;",b)});else if(b=k.mapping||k.name)for(c=0;c<b.length;c++)t(g,a(b[c],this).text()||"&#160;",c);d.append(g)})},y=function(c,d){var e,u,l,h,m,f=b.jsonReader.subgrid,r=g.getAccessor(c,f.root);if(null!=r)for(u=0;u<r.length;u++){m=r[u];e=a("<tr class='"+A+"'></tr>");if(!0===f.repeatitems)for(f.cell&&(m=m[f.cell]),l=0;l<m.length;l++)t(e,m[l]||"&#160;",
l);else if(h=k.mapping||k.name,h.length)for(l=0;l<h.length;l++)t(e,m[h[l]]||"&#160;",l);d.append(e)}},v=function(d,g,h){var m,l;m=q("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===b.altRows&&a(c).jqGrid("isBootstrapGuiStyle")?" table-striped":""));var f=a("<table"+(m?" style='width:1px' role='presentation' class='"+m+"'":"")+"><thead></thead><tbody></tbody></table>"),r=a("<tr></tr>");c.grid.endReq.call(c);for(l=0;l<k.name.length;l++)m=a("<th class='"+B+"'></th>").html(k.name[l]).width(k.width[l]),
r.append(m);r.appendTo(f[0].tHead);h(d,a(f[0].tBodies[0]));a("#"+e(b.id+"_"+g)).append(f);return!1},F=function(d){var e=a(d).attr("id"),f={nd_:(new Date).getTime()},h,l;f[b.prmNames.subgridid]=e;if(!k)return!1;if(k.params)for(l=0;l<k.params.length;l++)h=b.iColByName[k.params[l]],void 0!==h&&(f[b.colModel[h].name]=a(d.cells[h]).text().replace(/\&#160\;/ig,""));if(!c.grid.hDiv.loading)switch(c.grid.beginReq.call(c),b.subgridtype||(b.subgridtype=b.datatype),a.isFunction(b.subgridtype)?b.subgridtype.call(c,
f):b.subgridtype=b.subgridtype.toLowerCase(),b.subgridtype){case "xml":case "json":a.ajax(a.extend({type:b.mtype,url:a.isFunction(b.subGridUrl)?b.subGridUrl.call(c,f):b.subGridUrl,dataType:b.subgridtype,context:e,data:g.serializeFeedback.call(c,b.serializeSubGridData,"jqGridSerializeSubGridData",f),success:function(a){v(a,this,"xml"===b.subgridtype?x:y)},error:function(d,e,g){var f=void 0===b.loadSubgridError?b.loadError:b.loadSubgridError;c.grid.endReq.call(c);a.isFunction(f)&&f.call(c,d,e,g);b.subGridOptions.noEmptySubgridOnError||
v(null,this,"xml"===b.subgridtype?x:y)}},g.ajaxOptions,b.ajaxSubgridOptions||{}))}return!1},G=function(){var e=a(this).parent("tr")[0],m=e.nextSibling,k=e.id,n=b.id+"_"+k,l=function(a){return g.mergeCssClasses(b.subGridOptions.commonIconClass,b.subGridOptions[a])},p=1;a.each(b.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||p++});if(a(this).hasClass("sgcollapsed")){if(!0===b.subGridOptions.reloadOnExpand||!1===b.subGridOptions.reloadOnExpand&&!a(m).hasClass("ui-subgrid")){m=
1<=d?"<td colspan='"+d+"'>&#160;</td>":"";if(!f.call(c,"beforeExpand",n,k))return;a(e).after("<tr role='row' class='"+C+"'>"+m+"<td class='"+D+"'><span class='"+l("openicon")+"'></span></td><td colspan='"+parseInt(b.colNames.length-p,10)+"' class='"+E+"'><div id='"+n+"' class='tablediv'></div></td></tr>");a(c).triggerHandler("jqGridSubGridRowExpanded",[n,k]);a.isFunction(b.subGridRowExpanded)?b.subGridRowExpanded.call(c,n,k):F(e)}else a(m).show();a(this).html("<div class='"+h.getGuiStyles.call(c,
"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+h.getGuiStyles.call(c,"subgrid.button","sgbutton")+"'><span class='"+l("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded");b.subGridOptions.selectOnExpand&&a(c).jqGrid("setSelection",k)}else if(a(this).hasClass("sgexpanded")){if(!f.call(c,"beforeCollapse",n,k))return;!0===b.subGridOptions.reloadOnExpand?a(m).remove(".ui-subgrid"):a(m).hasClass("ui-subgrid")&&a(m).hide();a(this).html("<div class='"+h.getGuiStyles.call(c,
"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+h.getGuiStyles.call(c,"subgrid.button","sgbutton")+"'><span class='"+l("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed");b.subGridOptions.selectOnCollapse&&a(c).jqGrid("setSelection",k)}return!1},z,p,w=1;if(c.grid){z=c.rows.length;void 0!==n&&0<n&&(w=n,z=n+1);for(;w<z;)p=c.rows[w],a(p).hasClass("jqgrow")&&(p=a(p.cells[d]),p.hasClass("ui-sgcollapsed")&&(b.scroll&&p.off("click"),p.on("click",G))),w++;
!0===b.subGridOptions.expandOnLoad&&a(c.rows).filter(".jqgrow").each(function(b,c){a(c.cells[0]).click()});c.subGridXml=function(a,b){return v(a,b,x)};c.subGridJson=function(a,b){return v(a,b,y)}}})},expandSubGridRow:function(a){return n.call(this,a,"sgcollapsed")},collapseSubGridRow:function(a){return n.call(this,a,"sgexpanded")},toggleSubGridRow:function(a){return n.call(this,a,"ui-sgcollapsed")}})});
//# sourceMappingURL=grid.subgrid.map

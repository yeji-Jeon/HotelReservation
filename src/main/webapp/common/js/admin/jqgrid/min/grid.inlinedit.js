var $jscomp={scope:{},findInternal:function(a,k,r){a instanceof String&&(a=String(a));for(var f=a.length,v=0;v<f;v++){var B=a[v];if(k.call(r,B,v,a))return{i:v,v:B}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,k,r){if(r.get||r.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[k]=r.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,k,r,f){if(k){r=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var v=a[f];v in r||(r[v]={});r=r[v]}a=a[a.length-1];f=r[a];k=k(f);k!=f&&null!=k&&$jscomp.defineProperty(r,a,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,r){return $jscomp.findInternal(this,a,r).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var k=0;return $jscomp.iteratorPrototype(function(){return k<a.length?{done:!1,value:a[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,k){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var r=0,f={next:function(){if(r<a.length){var v=r++;return{value:k(v,a[v]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof module&&module.exports?module.exports=function(k,r){k||(k=window);void 0===r&&(r="undefined"!==typeof window?require("jquery"):require("jquery")(k));require("./grid.base");require("./jquery.fmatter");require("./grid.common");a(r);return r}:a(jQuery)})(function(a){var k=a.jgrid,r=k.fullBoolFeedback,f=k.hasOneFromClasses,v=a.fn.jqGrid,B=function(a){return v.getGuiStyles.call(this,
"states."+a)},E=function(d){var u=a.makeArray(arguments).slice(1);u.unshift("");u.unshift("Inline");u.unshift(d);return k.feedback.apply(this,u)};k.inlineEdit=k.inlineEdit||{};k.extend({editRow:function(d,u,e,h,c,t,f,A,n,b){var g={},l=a.makeArray(arguments).slice(1);"object"===a.type(l[0])?g=l[0]:(void 0!==u&&(g.keys=u),a.isFunction(e)&&(g.oneditfunc=e),a.isFunction(h)&&(g.successfunc=h),void 0!==c&&(g.url=c),null!=t&&(g.extraparam=t),a.isFunction(f)&&(g.aftersavefunc=f),a.isFunction(A)&&(g.errorfunc=
A),a.isFunction(n)&&(g.afterrestorefunc=n),a.isFunction(b)&&(g.beforeEditRow=b));return this.each(function(){var b=this,c=a(b),h=b.p,n=0,t=null,u={},p=h.colModel,e=h.prmNames;if(b.grid){var q=a.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},k.inlineEdit,h.inlineEditing||{},g),f=c.jqGrid("getInd",d,!0),l=q.focusField,A="object"===typeof l&&null!=l?a(l.target||l).closest("tr.jqgrow>td")[0]:
null;if(!1!==f&&(q.extraparam[e.oper]===e.addoper||E.call(b,q,"beforeEditRow",q,d))&&"0"===(a(f).attr("editable")||"0")&&!a(f).hasClass("not-editable-row")){e=k.detectRowEditing.call(b,d);if(null!=e&&"cellEditing"===e.mode){var e=e.savedRow,F=b.rows[e.id],v=B.call(b,"select");c.jqGrid("restoreCell",e.id,e.ic);a(F.cells[e.ic]).removeClass("edit-cell "+v);a(F).addClass(v).attr({"aria-selected":"true",tabindex:"0"})}k.enumEditableCells.call(b,f,a(f).hasClass("jqgrid-new-row")?"add":"edit",function(c){var g=
c.cm,m=a(c.dataElement),e=c.dataWidth,f,l=g.name,K=g.edittype,p=c.iCol,q=g.editoptions||{};if("hidden"!==c.editable){try{f=a.unformat.call(this,c.td,{rowId:d,colModel:g},p)}catch(Q){f="textarea"===K?m.text():m.html()}u[l]=f;m.html("");g=a.extend({},q,{id:d+"_"+l,name:l,rowId:d,mode:c.mode,cm:g,iCol:p});if("&nbsp;"===f||"&#160;"===f||1===f.length&&160===f.charCodeAt(0))f="";f=k.createEl.call(b,K,g,f,!0,a.extend({},k.ajaxOptions,h.ajaxSelectOptions||{}));a(f).addClass("editable");m.append(f);e&&a(f).width(c.dataWidth);
k.bindEv.call(b,f,g);"select"===K&&!0===q.multiple&&void 0===q.dataUrl&&k.msie&&a(f).width(a(f).width());null===t&&(t=p);n++}});0<n&&(u.id=d,h.savedRow.push(u),a(f).attr("editable","1"),l&&("number"===typeof l&&parseInt(l,10)<=p.length?t=l:"string"===typeof l?t=h.iColByName[l]:null!=A&&(t=A.cellIndex),setTimeout(function(){var d=c.jqGrid("getNumberOfFrozenColumns"),k=function(a){return h.frozenColumns&&0<d&&t<d?b.grid.fbRows[f.rowIndex].cells[a]:f.cells[a]},g=function(b){return a(b).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},
m=function(){return g(h.frozenColumns&&0<d?b.grid.fbRows[f.rowIndex]:f).first()},e=g(k(t));0<e.length?e.first().focus():"number"===typeof q.defaultFocusField||"string"===typeof q.defaultFocusField?(e=g(k("number"===typeof q.defaultFocusField?q.defaultFocusField:h.iColByName[q.defaultFocusField])),0===e.length&&(e=m()),e.first().focus()):m().focus()},0)),!0===q.keys&&(p=a(f),h.frozenColumns&&(p=p.add(b.grid.fbRows[f.rowIndex])),p.on("keydown",function(a){if(27===a.keyCode)return c.jqGrid("restoreRow",
d,q.afterrestorefunc),!1;if(13===a.keyCode){if("TEXTAREA"===a.target.tagName)return!0;c.jqGrid("saveRow",d,q);return!1}})),r.call(b,q.oneditfunc,"jqGridInlineEditRow",d,q))}}})},saveRow:function(d,f,e,h,c,t,F,A){var n=a.makeArray(arguments).slice(1),b={},g=this[0],l=a(g),m=null!=g?g.p:null,u,v=k.info_dialog,x=a.isFunction,L=null!=k.defaults&&x(k.defaults.fatalError)?k.defaults.fatalError:alert;if(g.grid&&null!=m){"object"===a.type(n[0])?b=n[0]:(x(f)&&(b.successfunc=f),void 0!==e&&(b.url=e),void 0!==
h&&(b.extraparam=h),x(c)&&(b.aftersavefunc=c),x(t)&&(b.errorfunc=t),x(F)&&(b.afterrestorefunc=F),x(A)&&(b.beforeSaveRow=A));var z=function(a){return l.jqGrid("getGridRes",a)},b=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:z("defaults.savetext")||"Saving..."},k.inlineEdit,m.inlineEditing||{},b),p={},I={},q={},C,H,G,y=
l.jqGrid("getInd",d,!0),D=a(y),n=m.prmNames,M=z("errors.errcap"),N=z("edit.bClose"),J,O,P=function(b,c){try{var d=k.getRelativeRect.call(g,c);v.call(g,M,b,N,{top:d.top,left:d.left+a(g).closest(".ui-jqgrid").offset().left})}catch(Q){L(b)}};if(!1!==y&&(u=b.extraparam[n.oper]===n.addoper?"add":"edit",E.call(g,b,"beforeSaveRow",b,d,u)&&(n=D.attr("editable"),b.url=b.url||m.editurl,J="clientArray"!==b.url,"1"===n&&(G=(a.jgrid.detectRowEditing.call(g,d)||{}).savedRow,k.enumEditableCells.call(g,y,D.hasClass("jqgrid-new-row")?
"add":"edit",function(b){var c=b.cm,d=c.formatter,f=c.editoptions||{},m=c.formatoptions||{},e={},h=k.getEditedValue.call(g,a(b.dataElement),c,e,b.editable);"select"===c.edittype&&"select"!==c.formatter&&(I[c.name]=e.text);H=k.checkValues.call(g,h,b.iCol,void 0,void 0,a.extend(b,{oldValue:null!=G?G[c.name]:null,newValue:h,oldRowData:G}));if(null!=H&&!1===H[0])return O=!0,P(H[1],b.td),!1;"date"===d&&!0!==m.sendFormatted&&(h=a.unformat.date.call(g,h,c));J&&!0===f.NullIfEmpty&&""===h&&(h="null");p[c.name]=
h}),!O)))){var w,n=m.prmNames;w=!1===m.keyName?n.id:m.keyName;if(p){p[n.oper]=n.editoper;if(void 0===p[w]||""===p[w])p[w]=k.stripPref(m.idPrefix,d);p=a.extend({},p,m.inlineData||{},b.extraparam)}z={options:b,rowid:d,tr:y,iRow:y.rowIndex,savedRow:G,newData:p,mode:u};if(E.call(g,b,"saveRowValidation",z))if(J)l.jqGrid("progressBar",{method:"show",loadtype:b.saveui,htmlcontent:b.savetext}),q=a.extend({},p,q),q[w]=k.stripPref(m.idPrefix,q[w]),m.autoEncodeOnEdit&&a.each(q,function(a,b){x(b)||(q[a]=k.oldEncodePostedData(b))}),
y.id===m.idPrefix+q[w]||null==n.idold||q.hasOwnProperty(n.idold)||(q[n.idold]=k.stripPref(m.idPrefix,y.id)),a.ajax(a.extend({url:x(b.url)?b.url.call(g,q[w],u,q,b):b.url,data:k.serializeFeedback.call(g,x(b.serializeSaveData)?b.serializeSaveData:m.serializeRowData,"jqGridInlineSerializeSaveData",q),type:x(b.mtype)?b.mtype.call(g,u,b,q[w],q):b.mtype,complete:function(c,f){l.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});if((300>c.status||304===c.status)&&(0!==c.status||4!==c.readyState)){var h,
e;e=l.triggerHandler("jqGridInlineSuccessSaveRow",[c,d,b,u,q]);if(null==e||!0===e)e=[!0,p];e[0]&&x(b.successfunc)&&(e=b.successfunc.call(g,c,d,b,u,q));a.isArray(e)?(h=e[0],p=e[1]||p):h=e;if(!0===h){m.autoEncodeOnEdit&&a.each(p,function(a,b){p[a]=k.oldDecodePostedData(b)});p=a.extend({},p,I);l.jqGrid("setRowData",d,p);D.attr("editable","0");for(h=0;h<m.savedRow.length;h++)if(String(m.savedRow[h].id)===String(d)){C=h;break}0<=C&&m.savedRow.splice(C,1);r.call(g,b.aftersavefunc,"jqGridInlineAfterSaveRow",
d,c,p,b);null!=e[2]?l.jqGrid("changeRowid",d,m.idPrefix+e[2]):y.id!==m.idPrefix+p[w]&&l.jqGrid("changeRowid",y.id,m.idPrefix+p[w]);D.removeClass("jqgrid-new-row").off("keydown")}else r.call(g,b.errorfunc,"jqGridInlineErrorSaveRow",d,c,f,null,b),!0===b.restoreAfterError&&l.jqGrid("restoreRow",d,b.afterrestorefunc)}},error:function(a,c,e){l.triggerHandler("jqGridInlineErrorSaveRow",[d,a,c,e,b]);if(x(b.errorfunc))b.errorfunc.call(g,d,a,c,e);else{a=a.responseText||a.statusText;try{v.call(g,M,'<div class="'+
B.call(g,"error")+'">'+a+"</div>",N,{buttonalign:"right"})}catch(Q){L(a)}}!0===b.restoreAfterError&&l.jqGrid("restoreRow",d,b.afterrestorefunc)}},k.ajaxOptions,m.ajaxRowOptions,b.ajaxSaveOptions||{}));else{p=a.extend({},p,I);z=l.jqGrid("setRowData",d,p);D.attr("editable","0");for(n=0;n<m.savedRow.length;n++)if(String(m.savedRow[n].id)===String(d)){C=n;break}0<=C&&m.savedRow.splice(C,1);r.call(g,b.aftersavefunc,"jqGridInlineAfterSaveRow",d,z,p,b);D.removeClass("jqgrid-new-row").off("keydown");y.id!==
m.idPrefix+p[w]&&l.jqGrid("changeRowid",y.id,m.idPrefix+p[w])}else z.errorText&&P(z.errorText,y)}}},restoreRow:function(d,f){var e=a.makeArray(arguments).slice(1),h={};"object"===a.type(e[0])?h=e[0]:a.isFunction(f)&&(h.afterrestorefunc=f);return this.each(function(){var c=this,e=a(c),f=c.p,u=-1,n={},b;if(c.grid){var g=a.extend(!0,{},k.inlineEdit,f.inlineEditing||{},h),l=e.jqGrid("getInd",d,!0);if(!1!==l&&E.call(c,g,"beforeCancelRow",g,d)){for(b=0;b<f.savedRow.length;b++)if(String(f.savedRow[b].id)===
String(d)){u=b;break}if(0<=u){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+k.jqID(l.id)).datepicker("hide")}catch(m){}a.each(f.colModel,function(){var b=this.name;f.savedRow[u].hasOwnProperty(b)&&(n[b]=f.savedRow[u][b],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(n[b]=a.unformat.date.call(c,n[b],this)))});e.jqGrid("setRowData",d,n);a(l).attr("editable","0").off("keydown");f.savedRow.splice(u,1);a("#"+k.jqID(d),c).hasClass("jqgrid-new-row")&&
setTimeout(function(){e.jqGrid("delRowData",d);e.jqGrid("showAddEditButtons",!1)},0)}r.call(c,g.afterrestorefunc,"jqGridInlineAfterRestoreRow",d)}}})},addRow:function(f){return this.each(function(){if(this.grid){var d=this,e=a(d),h=d.p,c=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},k.inlineEdit,h.inlineEditing||{},f||{});E.call(d,c,"beforeAddRow",c.addRowParams)&&(c.rowID=a.isFunction(c.rowID)?c.rowID.call(d,c):
null!=c.rowID?c.rowID:k.randId(),!0===c.useDefValues&&a(h.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue;c.initdata[this.name]=a.isFunction(e)?e.call(d):e}}),c.rowID=h.idPrefix+c.rowID,e.jqGrid("addRowData",c.rowID,c.initdata,c.position),a("#"+k.jqID(c.rowID),d).addClass("jqgrid-new-row"),c.useFormatter?a("#"+k.jqID(c.rowID)+" .ui-inline-edit",d).click():(h=h.prmNames,c.addRowParams.extraparam[h.oper]=h.addoper,e.jqGrid("editRow",
c.rowID,c.addRowParams),e.jqGrid("setSelection",c.rowID)))}})},inlineNav:function(d,u){"object"===typeof d&&(u=d,d=void 0);return this.each(function(){var e=this,h=a(e),c=e.p;if(this.grid&&null!=c){var t,r=d===c.toppager?c.idSel+"_top":c.idSel,v=d===c.toppager?c.id+"_top":c.id,n=B.call(e,"disabled"),b=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},
editParams:{},restoreAfterSelect:!0},h.jqGrid("getGridRes","nav"),k.nav||{},c.navOptions||{},k.inlineNav||{},c.inlineNavOptions||{},u||{});if(void 0===d)if(c.pager)if(h.jqGrid("inlineNav",c.pager,b),c.toppager)d=c.toppager,r=c.idSel+"_top",v=c.id+"_top";else return;else c.toppager&&(d=c.toppager,r=c.idSel+"_top",v=c.id+"_top");if(void 0!==d&&(t=a(d),!(0>=t.length))){0>=t.find(".navtable").length&&h.jqGrid("navGrid",d,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1});c._inlinenav=!0;if(!0===b.addParams.useFormatter){t=
c.colModel;var g,l;for(g=0;g<t.length;g++)if(t[g].formatter&&"actions"===t[g].formatter){t[g].formatoptions&&(l={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},t=a.extend(l,t[g].formatoptions),b.addParams.addRowParams={keys:t.keys,oneditfunc:t.onEdit,successfunc:t.onSuccess,url:t.url,extraparam:t.extraparam,aftersavefunc:t.afterSave,errorfunc:t.onError,afterrestorefunc:t.afterRestore});break}}b.add&&h.jqGrid("navButtonAdd",d,{caption:b.addtext,
title:b.addtitle,commonIconClass:b.commonIconClass,buttonicon:b.addicon,iconsOverText:b.iconsOverText,id:v+"_iladd",onClickButton:function(){f(this,n)||h.jqGrid("addRow",b.addParams)}});b.edit&&h.jqGrid("navButtonAdd",d,{caption:b.edittext,title:b.edittitle,commonIconClass:b.commonIconClass,buttonicon:b.editicon,iconsOverText:b.iconsOverText,id:v+"_iledit",onClickButton:function(){if(!f(this,n)){var a=c.selrow;a?h.jqGrid("editRow",a,b.editParams):e.modalAlert()}}});b.save&&(h.jqGrid("navButtonAdd",
d,{caption:b.savetext,title:b.savetitle,commonIconClass:b.commonIconClass,buttonicon:b.saveicon,iconsOverText:b.iconsOverText,id:v+"_ilsave",onClickButton:function(){if(!f(this,n)){var d=c.savedRow[0].id;if(d){var g=c.prmNames,l=g.oper,u=b.editParams;a("#"+k.jqID(d),e).hasClass("jqgrid-new-row")?(b.addParams.addRowParams.extraparam[l]=g.addoper,u=b.addParams.addRowParams):(b.editParams.extraparam||(b.editParams.extraparam={}),b.editParams.extraparam[l]=g.editoper);h.jqGrid("saveRow",d,u)}else e.modalAlert()}}}),
a(r+"_ilsave").addClass(n));b.cancel&&(h.jqGrid("navButtonAdd",d,{caption:b.canceltext,title:b.canceltitle,commonIconClass:b.commonIconClass,buttonicon:b.cancelicon,iconsOverText:b.iconsOverText,id:v+"_ilcancel",onClickButton:function(){if(!f(this,n)){var d=c.savedRow[0].id,g=b.editParams;d?(a("#"+k.jqID(d),e).hasClass("jqgrid-new-row")&&(g=b.addParams.addRowParams),h.jqGrid("restoreRow",d,g)):e.modalAlert()}}}),a(r+"_ilcancel").addClass(n));if(!0===b.restoreAfterSelect)h.on("jqGridSelectRow",function(a,
d){if(0<c.savedRow.length&&!0===c._inlinenav){var e=c.savedRow[0].id;d!==e&&"number"!==typeof e&&h.jqGrid("restoreRow",e,b.editParams)}});h.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){h.jqGrid("showAddEditButtons",!1)});h.on("jqGridInlineEditRow",function(a,b){h.jqGrid("showAddEditButtons",!0,b)})}}})},showAddEditButtons:function(d){return this.each(function(){if(this.grid){var f=this.p,e=f.idSel,h=B.call(this,"disabled"),c=e+"_ilsave,"+e+"_ilcancel"+(f.toppager?","+e+"_top_ilsave,"+
e+"_top_ilcancel":""),f=e+"_iladd,"+e+"_iledit"+(f.toppager?","+e+"_top_iladd,"+e+"_top_iledit":"");a(d?f:c).addClass(h);a(d?c:f).removeClass(h)}})}})});
//# sourceMappingURL=grid.inlinedit.map
